name: on_pr

on:
    pull_request:
        branches:
          - master

jobs:
  sim:
    name: Run verification
    runs-on: [self-hosted, modelsim]
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Compile TEST.MAC
        run: |
                cd vm1/tst
                ./build.sh test.mac

      - name: Run VM1 simulation
        run: vm1/hdl/syn/sim/de0/run_vsim.sh

