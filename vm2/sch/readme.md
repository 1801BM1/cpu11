## Original factory schematics

Оригинальная схема Ангстрема:

Лист 1		БРД, РД, БРК, РК, РСП
Лист 2		АЛУ, сдвигатель и БОБ
Лист 3          Счетчик команд и копия РСП
Лист 4		Блок констант, RD, RB, РОН
Лист 5 		БСОБ и схема управления обменом
Лист 6		Схема формирования состояний
Лист 7		Дешифраторы ПЧ и ПЗ (поля чтения и поля записи)
Лист 8		ДШК (дешифратор команд) и БМУ (блок микропрограммного управления)
Лист 9 		Схема образования условий ветвления
Лист 10		ДШК РА (расширенной арифметики)
Лист 11		Регистры РА, счетчик и дешифратор тактов
Лист 12		Интерфейсный блок
Лист 13		Блок прерываний
Лист 14		Формирователь стробимпульса
Лист 15		Элементы входы-выхода на шине AD
Лист 16		Генератор смещения подложки


Использованные сокращения:

ОБ		операционный блок
БМУ		блок микропрограммного управления
БРА		блок расширенной арифметики
БОВ		блок обработки условий ветвления
ИБ		интерфейсный блок
БС БМУ		блок синхронизации БМУ
БС ОБ		блок синхронизации ОБ

БРД		буферный регистр данных
РА		регистр адреса
КРСК		копия регистра счетчика команд
КОМП		компаратор адреса
БРК ОБ		буферный регистр команд ОБ
РСП		регистр состояния процессора
БК		блок констант
КРСП		копия регистр состояния процессора
РОН		регистр общего назначения
АК		аккумулятор
РИ		регистр источника
РК		регистр команд
АЛУ		арифметико-логическое устройства
СДВ		сдвигатель
БОБ		блок обмена байтов
СхЗп		схема записи
СФС		схема формирования состояния
ДШК		дешифратор команд
НМК		накопитель микрокоманд
РСА		регистр следующего адреса
РТА		регистр текущего адреса
РПР		регистр прерываний
РМК		регистр микрокоманд
РПР		регистр прерываний
ЖС		ждать состояния
ПП		принять прерывание
КК		конец команды
ТжБПР		торможение БМУ блоком прерывания
РИП		регистр источников прерываний
АВП		адрес вектора прерываний
КПР		код прерывания
ПГ		прерывание готово
АПД		арбитр прямого доступа
БВА		блок выдачи адреса
БПВД		блок приема и выдачи адреса
СУО		схема управления обменами
ПРТ		прерывание таймера
ДО		двойная ошибка
МС		магистраль свободна
ЗпПО		запись признаков обмена
SK		сдинутый на половину такта ЗпЗО
ГИБ		готовность интерфейсного блока
ГМБ		готовность микропрограммного блока
УОБ		управление от блока расширенной арифметики
БИ		бинарная инструкция
ДОП		движение операнда
ПБ		признак байта
ПЛ		признак литеры
ПСО		признак слова операнда
ДОП		движение операнда
РБИ		разрешение байта интерфейса
МТП		модификация тела программы


Соответствие цепей:

~M[15:0]	~AD[15:0]	- внутренняя шина адреса/данных, инвертирована
ПРД		AD_RD		- чтение внешних входов AD на внутреннюю шину 
УАД		~AD_OE		- разрешение выходов внешних выводов AD
устF(фи)	RESF		- сброс фазы тактового генератора

СПТ				- сбой питания
RСПТ2		RESET		- сброс по сбою питания
R		MCRES		- сброс РСА (NAF)
RA		ABORT		- сброс при зависании
С0		AC0		- старт про фронту ACLO (бывший PLI4R)
ПП		PLI_REQ		- прием прерывания
ПГ		PLI_ACK		- прерывание готово
~ЗО1		~WIN_REQ	- запрос окна
RЗВС		TOVF_ACK	- сброс запроса зависания
REVNT		EVNT_ACK	- сброс запроса таймера
~I7		~DC_I7		- предварительный дешифратор команд
~J7		~DC_J7		- предварительный дешифратор команд
Ф2		DC_F2		- предварительный дешифратор команд
Ф8		DC_F8		- предварительный дешифратор команд
БИ		DC_BI		- флаг бинарной инфструкции
ПЛ		DC_FL		- признак литеры
ПБ		DC_FB		- признак байта
SII-1,SII-2	SA1, SA2	- стробы матриц микрокоманд
SI-1, SI-2	IR_STB		- строб записи регистра команд
SУВ		BRA_REQ		- запуск блока обработки ветвления
RКК		CLR_CEND	- сброс конец команды
КК		CMD_END		- конец команды
RKK		RES_END		- сброс конец команды
ЗпПО		IOP_STB		- запись признаков обмена
ЗпРК    	IR_STB 		- запись регистра команд
ЗпРА		WR_RA		- запись результатов АЛУ
ЗпБРК		BIR_STB		- запись буферного регистра команд
ЗпПЧ		MC_STB		- запись поля чтения микрокоманды
ЗпПЗ		MW_STB		- запись поля записи микрокоманды
~ВТВ		~BRA		- ветвление
ЗпСЖС		WS_WAIT		- записать состояние после ожидания
ЗпСКК		WS_CEND		- записать состояние в конце команды
СИП		SD_WORD		- слово источника или приемника
СИСП		WORD27
ПСИ		DC_WORD		- признак словной информации
ЖС		WT_STATE	- ждать состояние
QTЖС		STA_NRDY	- триггер ожидания состояния
ТжБПР		PLI_NRDY	- торможение БМУ блоком прерывания
ЗС				- записать признаки  NZVC
МС				- записать признаки NZV
ПС		GET_STATE	- принять состояние (инвертировано)
RПС		CLR_WSTA	- сброс приема состояния
ПД				- принять данные
ТПД				- торможение по приему данных		
РЦ1		RSACK		- сброс цикла 1
RТЦ		SYNC_CLR	- сброс цикла
ФСБ		BUF_RES		- флаг сброса буфера

ЗПД				- запись данных
ЧК		IO_CMD		- чтение команды
ЧД		IO_IN		- чтение данных
ЧМЗ				- чтение модификация запись
ОЧП		IO_ALT		- обращение в чужое пространство
ЗЧП				- запись в чужое пространство
ЧЧП				- чтение из чужого простратнства
ЧКД		IO_RCD		- чтение команды-данных с опережением
БАЧ				- безадресное чтение
ПАВП		IO_IAK		- прием адреса вектора прерывания
ЛО		TO_RPLY		- ложный ответ от схемы зависаний
БЛО		IO_CLR		- сигнал сброса триггера запроса от схемы зависаний
~SEL1				- признак безадресного чтения
ВА				- выдача адреса
ВАСМ		BUS_ADR		- выдача адреса на системную магистраль
ВДСМ		BUS_DAT		- выдача данных на системную магистраль
~ПР				- прием по магистрали
РБАО				- разрешение безадресного обмена
ПУ		~SXT_Y		- пересылка поля Y (расширение знака в старший байт)

SАЛУ		SALU
CАЛУ		CALU
ALU i		OR		- вход разряда АЛУ i
ALU j		AN		- вход разряда АЛУ j
ALU k		AK		- выход разряда АЛУ k
ОББ		BXCHG		- обмен байтов
ПЕР		QSWP

Несоответствия фактической схемы:
- добавлен еще один генератор подложки
- на резервный разряд матрицы прерываний приходит GND а не сброс зависания
- усилитель-инвертор в цепи DIN
- добавлен еще один резервный вход в матрицу прерываний. вход болтается в воздухе
- выходной триггер DOUT не подключен к MCRES - задержка отключения на такт
- регистр адреса РА НЕ читается на шину X (только на ~Y)


Шина записи ax/~ay
ax      pull r06,acc,srec  	xb	pc	c/psw	ea_ct	sxt/win
	     pc2,areg,qreg
		ea1, ea2      
00: 22	2	14	        1	2	2	1		+
01: 22  2	14		1	2	2	1		+
02: 22  2	14		1	2	2	1		+
03: 22  2	14		1	2	2	1		+
04: 22  2	14		1	2	2	1		+
05: 21  2	14		1	2	2			+
06: 21  2	14		1	2	2			+
07: 22  2	14		1	2	2               1	+
08: 22  2	14             	1	2	2		1	+
09: 20  2	14		1	2			1	+
10: 20  2	14		1	2			1	+
11: 21  2	14		1	2			2	+
12: 21  2	14		1	2			2	+
13: 20  2	14		1	2			1	+
14: 20  2	14		1	2			1	+
15: 20  2       14		1	2			1	+

ay
00: 20  2	14		1		2	1		+
01: 20  2	14		1		2	1		+
02: 20  2	14		1		2	1		+
03: 20  2	14		1		2	1		+
04: 20  2	14		1		2	1		+
05: 19  2	14		1		2			+
06: 19  2	14		1		2			+
07: 20  2	14		1		2		1	+
08: 20  2	14		1		2		1	+
09: 18  2	14		1				1	+
10: 18  2	14		1				1	+
11: 18  2	14		1				1	+
12: 18  2	14		1				1	+
13: 20  2	14		1				2
14: 20  2	14		1				2
15: 20  2	14		1				2
